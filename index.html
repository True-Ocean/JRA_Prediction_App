<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:url" content="https://true-ocean.github.io/JRA_Prediction_App/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="ğŸ† ãƒ•ã‚§ãƒ–ãƒ©ãƒªãƒ¼S 2026 äºˆæƒ³ãƒ„ãƒ¼ãƒ«">
    <meta property="og:description" content="å¥½ããªè¨€è‘‰ã‚’ç¨®ã«ã—ã¦ã€è‡ªåˆ†ã ã‘ã®ç«¶é¦¬äºˆæƒ³ã‚’ç®—å‡ºï¼">
    <meta property="og:image" content="https://true-ocean.github.io/JRA_Prediction_App/image.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ğŸ† ãƒ•ã‚§ãƒ–ãƒ©ãƒªãƒ¼S 2026 äºˆæƒ³ãƒ„ãƒ¼ãƒ«">
    <meta name="twitter:description" content="å¥½ããªè¨€è‘‰ã‚’ç¨®ã«ã—ã¦ã€è‡ªåˆ†ã ã‘ã®ç«¶é¦¬äºˆæƒ³ã‚’ç®—å‡ºï¼">

    <title>ç«¶é¦¬äºˆæƒ³ãƒ„ãƒ¼ãƒ«ï¼ˆãƒ•ã‚§ãƒ–ãƒ©ãƒªãƒ¼Sï¼‰</title>
    <style>
        :root {
            --theme-color: #a67c52;
            --theme-hover: #8c6543;
            --accent-color: #27ae60;
            --reset-color: #95a5a6;
            --copy-color: #34495e;
        }
        /* åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
        body { font-family: "Helvetica Neue", Arial, sans-serif; background: #eef2f3; color: #333; padding: 10px; margin: 0; transition: 0.3s; }
        .container { background: white; max-width: 600px; margin: 20px auto; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); box-sizing: border-box; }
        h1 { text-align: center; color: #2c3e50; border-bottom: 2px solid var(--theme-color); padding-bottom: 10px; margin-bottom: 20px; font-size: 1.5em; transition: 0.3s; }
        
        /* ãƒ•ã‚©ãƒ¼ãƒ è¦ç´  */
        .form-group { margin-bottom: 15px; display: flex; flex-direction: column; align-items: stretch;}
        label { font-weight: bold; margin-bottom: 5px; font-size: 0.85em; color: #555; text-align: left;}
        select, input { padding: 12px; border: 1px solid #ccc; border-radius: 6px; font-size: 16px; background: #fff; width: 100%; box-sizing: border-box; -webkit-appearance: none; appearance: none; text-align: left; text-align-last: left; }
        
        /* ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆã‚¹ãƒãƒ›æ™‚ã¯1åˆ—ï¼‰ */
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 5px; }
        @media (max-width: 480px) { .row { grid-template-columns: 1fr; } }

        .word-inputs { display: flex; flex-direction: column; gap: 8px; width: 100%; }

        /* ãƒœã‚¿ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆå¹…ã‚’çµ±ä¸€ï¼‰ */
        .button-stack { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        button { width: 100%; padding: 15px; color: white; border: none; border-radius: 6px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.2s; box-sizing: border-box; }
        
        .btn-predict { background: var(--theme-color); font-size: 18px; }
        .btn-predict:hover { opacity: 0.9; }
        .btn-reset { background: var(--reset-color); }
        .btn-copy { background: var(--copy-color); display: none; } /* çµæœãŒã‚ã‚‹æ™‚ã ã‘è¡¨ç¤º */
        button:active { transform: scale(0.98); }

        /* äºˆæƒ³çµæœ */
        #result { margin-top: 25px; }
        .prediction-card { border: 1px solid #ddd; border-radius: 8px; background: #fff; overflow: hidden; }
        .prediction-item { display: flex; align-items: center; justify-content: flex-start; padding: 12px 15px; border-bottom: 1px solid #eee; }
        .prediction-item:last-child { border-bottom: none; }
        .term { width: 45px; font-size: 0.75em; color: #7f8c8d; font-weight: bold; flex-shrink: 0; }
        .mark { width: 30px; font-weight: bold; font-size: 1.2em; text-align: center; flex-shrink: 0; }
        .waku-box { width: 42px; height: 42px; border: 2px solid #333; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.4em; margin-left: 10px; flex-shrink: 0; }
        .horse-info { margin-left: 12px; display: flex; flex-direction: column; min-width: 0; }
        .horse-name { font-weight: bold; font-size: 1em; color: #2c3e50; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .jockey-name { font-size: 0.8em; color: #666; margin-top: 2px; }
    </style>
</head>
<body>

<div class="container">

    <h1 id="mainTitle">ğŸ† ãƒ•ã‚§ãƒ–ãƒ©ãƒªãƒ¼S 2026 ğŸ</h1>
    
    <p style="text-align: center; font-size: 0.85em; color: #666; line-height: 1.6; margin-bottom: 20px; background: #f9f9f9; padding: 10px; border-radius: 6px; border-left: 4px solid var(--theme-color);">
        ã‚ãªãŸã ã‘ã®ãƒ©ãƒ³ãƒ€ãƒ ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã¿ã‚ˆã†ï¼<br>
        æ¡ä»¶ã‚’å¤‰æ›´ã™ã‚Œã°ä»–ãƒ¬ãƒ¼ã‚¹ã®äºˆæƒ³ã‚‚ã§ãã‚‹ã‚ˆï¼
    </p>

    <div class="form-group">
        <label>é–‹å‚¬æ—¥</label>
        <input type="date" id="raceDate" onchange="checkRaceMode()">
    </div>

    <div class="row">
        <div class="form-group"><label>ç«¶é¦¬å ´</label>
            <select id="venue" onchange="checkRaceMode()">
                <option>æœ­å¹Œ</option><option>å‡½é¤¨</option><option>æ–°æ½Ÿ</option><option>ç¦å³¶</option>
                <option selected>æ±äº¬</option><option>ä¸­å±±</option><option>ä¸­äº¬</option><option>äº¬éƒ½</option>
                <option>é˜ªç¥</option><option>å°å€‰</option>
            </select>
        </div>
        <div class="form-group"><label>ãƒ¬ãƒ¼ã‚¹ç•ªå·</label>
            <select id="raceNum" onchange="checkRaceMode()">
                <script>for(let i=1;i<=12;i++){ const sel = (i===11?'selected':''); document.write(`<option value="${i}R" ${sel}>${i}R</option>`); }</script>
            </select>
        </div>
    </div>

    <div class="row">
        <div class="form-group"><label>å¹´é½¢é™å®š</label>
            <select id="ageLimit" onchange="checkRaceMode()">
                <option>2æ­³</option><option>3æ­³</option><option>3æ­³ä»¥ä¸Š</option><option selected>4æ­³ä»¥ä¸Š</option>
            </select>
        </div>
        <div class="form-group"><label>ã‚¯ãƒ©ã‚¹</label>
            <select id="raceClass" onchange="checkRaceMode()">
                <option selected>G1</option><option>G2</option><option>G3</option><option>OP(L)</option>
                <option>ã‚ªãƒ¼ãƒ—ãƒ³</option><option>3å‹ã‚¯ãƒ©ã‚¹</option><option>2å‹ã‚¯ãƒ©ã‚¹</option>
                <option>1å‹ã‚¯ãƒ©ã‚¹</option><option>æœªå‹åˆ©</option><option>æ–°é¦¬</option>
            </select>
        </div>
    </div>

    <div class="row">
        <div class="form-group"><label>ãƒˆãƒ©ãƒƒã‚¯</label>
            <select id="track" onchange="updateTheme(); checkRaceMode();">
                <option value="èŠ">èŠ</option>
                <option value="ãƒ€ãƒ¼ãƒˆ" selected>ãƒ€ãƒ¼ãƒˆ</option>
            </select>
        </div>
        <div class="form-group"><label>è·é›¢</label>
            <select id="distance" onchange="checkRaceMode()">
                <script>
                    const dists = ['1000','1150','1200','1300','1400','1500','1600','1700','1800','1900','2000','2100','2200','2300','2400','2500','2600','3000','3200','3400','3600'];
                    dists.forEach(d => {
                        const sel = (d === '1600' ? 'selected' : '');
                        document.write(`<option value="${d}" ${sel}>${d}m</option>`);
                    });
                </script>
            </select>
        </div>
    </div>

    <div class="row">
        <div class="form-group"><label>é‡é‡</label>
            <select id="weightType" onchange="checkRaceMode()">
                <option selected>å®šé‡</option><option>åˆ¥å®š</option><option>é¦¬é½¢</option><option>ãƒãƒ³ãƒ‡</option>
            </select>
        </div>
        <div class="form-group"><label>é¦¬å ´çŠ¶æ…‹</label>
            <select id="condition">
                <option selected>è‰¯</option><option>ç¨</option><option>é‡</option><option>ä¸</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label>å‡ºèµ°é ­æ•°</label>
        <select id="horseCount" onchange="checkRaceMode()">
            <script>
                for(let i=5; i<=18; i++) {
                    const selected = i === 16 ? 'selected' : '';
                    document.write(`<option value="${i}" ${selected}>${i}é ­</option>`);
                }
            </script>
        </select>
    </div>

    <div class="form-group">
        <label>å¥½ããªãƒ©ãƒ³ãƒ€ãƒ ãƒ¯ãƒ¼ãƒ‰ï¼ˆæœ€å¤§3ã¤ï¼‰</label>
        <div class="word-inputs">
            <input type="text" id="word1" placeholder="ãƒ¯ãƒ¼ãƒ‰1">
            <input type="text" id="word2" placeholder="ãƒ¯ãƒ¼ãƒ‰2">
            <input type="text" id="word3" placeholder="ãƒ¯ãƒ¼ãƒ‰3">
        </div>
    </div>

    <div class="button-stack">
        <button class="btn-predict" onclick="generatePrediction()">äºˆæƒ³ã‚’ç®—å‡ºã™ã‚‹</button>
        <button class="btn-copy" id="copyBtn" onclick="copyResult()">çµæœã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼</button>
        <button class="btn-reset" onclick="resetToDefault()">ãƒªã‚»ãƒƒãƒˆï¼ˆãƒ•ã‚§ãƒ–ãƒ©ãƒªãƒ¼Sï¼‰</button>
    </div>
    <div id="result"></div>

    <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; color: #888; font-size: 0.7em; line-height: 1.5;">
        <p style="margin-bottom: 10px;">
            Disclaimer: This application is for informational purposes only. It does not provide financial or betting advice. Users are responsible for their own decisions.<br>
            å…è²¬äº‹é …ï¼šæœ¬ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¯æƒ…å ±æä¾›ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€é‡‘èã¾ãŸã¯è³­åšã«é–¢ã™ã‚‹ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚åˆ©ç”¨è€…ã¯è‡ªå·±ã®åˆ¤æ–­ã«åŸºã¥ã„ã¦è¡Œå‹•ã™ã‚‹è²¬ä»»ãŒã‚ã‚Šã¾ã™ã€‚
        </p>
        <p style="text-align: center; font-weight: bold;">
            Created by <a href="#" style="color: #666; text-decoration: none;">ã‚·ãƒ£ãƒãƒ¯ãƒ¼ãƒ«</a>. All rights reserved.
        </p>
    </footer>

</div>

<script>

// é•ã†G1ã«ãªã‚Œã°ã€ã“ã“ã®æƒ…å ±ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ï¼ˆGeminiã«ç”»åƒã‚’æ¸¡ã—ã¦ä¿®æ­£ã•ã›ãŸæ–¹ãŒæ—©ã„ï¼‰=============================================================================
const horseDetails = [
    { name: "ã‚ªãƒ¡ã‚¬ã‚®ãƒã‚¹", info: "ç‰¡6", jockey: "å²©ç”°åº·èª " },
    { name: "ãƒãƒƒãƒ”ãƒ¼ãƒãƒ³", info: "ç‰¡4", jockey: "é«˜æ‰åéº’" },
    { name: "ãƒ–ãƒ©ã‚¤ã‚¢ãƒ³ã‚»ãƒ³ã‚¹", info: "ç‰¡6", jockey: "å²©ç”°æœ›æ¥" },
    { name: "ãƒšãƒªã‚¨ãƒ¼ãƒ«", info: "ç‰¡6", jockey: "ä½ã€…æœ¨å¤§" },
    { name: "ã‚·ãƒƒã‚¯ã‚¹ãƒšãƒ³ã‚¹", info: "ç‰¡5", jockey: "æˆ¸å´åœ­å¤ª" },
    { name: "ãƒ©ãƒ ã‚¸ã‚§ãƒƒãƒˆ", info: "ç‰¡5", jockey: "ä¸‰æµ¦çš‡æˆ" },
    { name: "ãƒ­ãƒ³ã‚°ãƒ©ãƒ³", info: "ã‚»8", jockey: "è»é‡æ¥µ" },
    { name: "ã‚µã‚¯ãƒ©ãƒˆã‚¥ã‚¸ãƒ¥ãƒ¼ãƒ«", info: "ã‚»9", jockey: "ã‚­ãƒ³ã‚°" },
    { name: "ãƒ€ãƒ–ãƒ«ãƒãƒ¼ãƒˆãƒœãƒ³ãƒ‰", info: "ç‰5", jockey: "å‚äº•ç‘ æ˜Ÿ" },
    { name: "ãƒ­ãƒ¼ãƒ‰ã‚¯ãƒ­ãƒ³ãƒŒ", info: "ç‰¡5", jockey: "æ¨ªå±±å’Œç”Ÿ" },
    { name: "ã‚µãƒ³ãƒ©ã‚¤ã‚ºãƒ›ãƒ¼ã‚¯", info: "ã‚»7", jockey: "æ¾å²¡æ­£æµ·" },
    { name: "ã‚³ã‚¹ã‚¿ãƒãƒ´ã‚¡", info: "ç‰¡6", jockey: "ãƒ«ãƒ¡ãƒ¼ãƒ«" },
    { name: "ãƒŠãƒãƒ¥ãƒ©ãƒ«ãƒ©ã‚¤ã‚º", info: "ç‰¡4", jockey: "æ¨ªå±±æ­¦å²" },
    { name: "ã‚¦ã‚£ãƒ«ã‚½ãƒ³ãƒ†ã‚½ãƒ¼ãƒ­", info: "ç‰¡7", jockey: "å·ç”°å°†é›…" },
    { name: "ãƒšãƒ—ãƒãƒ‰ãƒŠã‚¤ãƒ«", info: "ç‰¡8", jockey: "å¯Œç”°æš" },
    { name: "ã‚µã‚¤ãƒ¢ãƒ³ã‚¶ãƒŠãƒ‰ã‚¥", info: "ç‰¡6", jockey: "æ± æ·»è¬™ä¸€" }
];

let isFebStakes = true;
let currentPredictionText = "";

window.onload = function() {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('raceDate').value = today;
    checkRaceMode();
};

function checkRaceMode() {
    const venue = document.getElementById('venue').value;
    const raceNum = document.getElementById('raceNum').value;
    const track = document.getElementById('track').value;
    const distance = document.getElementById('distance').value;
    const weight = document.getElementById('weightType').value;
    const count = document.getElementById('horseCount').value;
    const raceClass = document.getElementById('raceClass').value;

    isFebStakes = (venue === "æ±äº¬" && raceNum === "11R" && track === "ãƒ€ãƒ¼ãƒˆ" && 
                   distance === "1600" && weight === "å®šé‡" && count === "16" && raceClass === "G1");

    // é•ã†G1ã«ãªã‚Œã°ã€ã“ã“ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨=============================================================================
    document.getElementById('mainTitle').innerText = isFebStakes ? "ğŸ† ãƒ•ã‚§ãƒ–ãƒ©ãƒªãƒ¼S 2026" : "ğŸ‡ ãƒ¬ãƒ¼ã‚¹äºˆæƒ³ (æ±ç”¨)";
    // æ¡ä»¶ãŒå¤‰ã‚ã£ãŸã‚‰ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’éš ã™
    document.getElementById('copyBtn').style.display = "none";
}


// é•ã†G1ã«ãªã‚Œã°ã€ã“ã“ã®æ¡ä»¶ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨=============================================================================
function resetToDefault() {
    document.getElementById('venue').value = "æ±äº¬";
    document.getElementById('raceNum').value = "11R";
    document.getElementById('ageLimit').value = "4æ­³ä»¥ä¸Š";
    document.getElementById('raceClass').value = "G1";
    document.getElementById('track').value = "ãƒ€ãƒ¼ãƒˆ";
    document.getElementById('distance').value = "1600";
    document.getElementById('weightType').value = "å®šé‡";
    document.getElementById('horseCount').value = "16";
    document.getElementById('word1').value = "";
    document.getElementById('word2').value = "";
    document.getElementById('word3').value = "";
    updateTheme();
    checkRaceMode();
    document.getElementById('result').innerHTML = "";
}

function updateTheme() {
    const track = document.getElementById('track').value;
    const root = document.documentElement;
    if (track === "èŠ") {
        root.style.setProperty('--theme-color', '#27ae60');
        root.style.setProperty('--theme-hover', '#219150');
    } else {
        root.style.setProperty('--theme-color', '#a67c52');
        root.style.setProperty('--theme-hover', '#8c6543');
    }
}

function generatePrediction() {
    const count = parseInt(document.getElementById('horseCount').value);
    const date = document.getElementById('raceDate').value;
    const venue = document.getElementById('venue').value;
    const raceNum = document.getElementById('raceNum').value;
    const w1 = document.getElementById('word1').value;
    const w2 = document.getElementById('word2').value;
    const w3 = document.getElementById('word3').value;
    
    if(!w1 && !w2 && !w3) { alert("ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"); return; }

    let seed = 0;
    const combined = date + venue + raceNum + 
                     document.getElementById('ageLimit').value + 
                     document.getElementById('raceClass').value + 
                     document.getElementById('track').value + 
                     document.getElementById('distance').value + 
                     document.getElementById('weightType').value + 
                     document.getElementById('condition').value + w1 + w2 + w3;

    for (let i = 0; i < combined.length; i++) {
        seed = (seed + combined.charCodeAt(i) * (i + 1)) % 1000000;
    }

    let horses = Array.from({length: count}, (_, i) => i + 1);
    for (let i = horses.length - 1; i > 0; i--) {
        seed = (seed * 9301 + 49297) % 233280;
        const j = Math.floor((seed / 233280) * (i + 1));
        [horses[i], horses[j]] = [horses[j], horses[i]];
    }

    const marks = [
        {t: "æœ¬å‘½", s: "â—"}, {t: "å¯¾æŠ—", s: "â—‹"},
        {t: "å˜ç©´", s: "â–²"}, {t: "é€£ä¸‹", s: "â–³"}, {t: "æ˜Ÿ", s: "â­ï¸"}
    ];

    let html = "<h3>äºˆæƒ³çµæœ</h3><div class='prediction-card'>";
    let copyText = `ã€${document.getElementById('mainTitle').innerText}ã€‘\n`;
    copyText += `${date} ${venue}${raceNum}\n`;

    let usedWords = [w1, w2, w3].filter(w => w !== "").join(", ");
    if (usedWords) {
        copyText += `å…¥åŠ›ã—ãŸãƒ¯ãƒ¼ãƒ‰ï¼š${usedWords}\n`;
    }
    copyText += `\n`;

    for(let i = 0; i < 5; i++) {
        if (i >= count) break;
        const horseNum = horses[i];
        const waku = getWakuInfo(horseNum, count);
        let infoHtml = "";
        let lineText = `${marks[i].s} ${horseNum}ç•ª`;

        if (isFebStakes) {
            const horse = horseDetails[horseNum - 1] || { name: horseNum + "ç•ª", info: "", jockey: "" };
            infoHtml = `
                <div class="horse-info">
                    <div class="horse-name">${horse.name}ï¼ˆ${horse.info}ï¼‰</div>
                    <div class="jockey-name">${horse.jockey}</div>
                </div>`;
            lineText += ` ${horse.name}`;
        }

        html += `
            <div class="prediction-item">
                <div class="term">${marks[i].t}</div>
                <div class="mark">${marks[i].s}</div>
                <div class="waku-box" style="background:${waku.bg}; color:${waku.txt}">${horseNum}</div>
                ${infoHtml}
            </div>`;
        copyText += lineText + "\n";
    }
    
    document.getElementById('result').innerHTML = html + "</div>";
    currentPredictionText = copyText + "\n#ç«¶é¦¬äºˆæƒ³ #JRA ";
    document.getElementById('copyBtn').style.display = "block"; // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
}

function copyResult() {
    navigator.clipboard.writeText(currentPredictionText).then(() => {
        alert("äºˆæƒ³çµæœã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼SNSç­‰ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚");
    }).catch(err => {
        alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§é¸æŠã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚");
    });
}

function getWakuInfo(num, total) {
    const colors = [{bg:"#fff",txt:"#333"},{bg:"#333",txt:"#fff"},{bg:"#e74c3c",txt:"#fff"},{bg:"#3498db",txt:"#fff"},{bg:"#f1c40f",txt:"#333"},{bg:"#27ae60",txt:"#fff"},{bg:"#e67e22",txt:"#fff"},{bg:"#ff9ff3",txt:"#333"}];
    let w = 1;
    if (total <= 8) w = num;
    else {
        const b = Math.floor(total / 8), r = total % 8;
        let cur = 0;
        for(let i=1; i<=8; i++) {
            cur += (b + (i > (8 - r) ? 1 : 0));
            if(num <= cur) { w = i; break; }
        }
    }
    return colors[w-1];
}
</script>
</body>
</html>